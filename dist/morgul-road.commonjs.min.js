"use strict";function isObject(e){return"[object Object]"===type.call(e)}function isString(e){return"[object String]"===type.call(e)}function noop(){}function forEach(e,t){for(var n=0;n<e.length&&!t(e[n],n++););}function getURLPart(e,t){return/รถ/.test(aElement[t])?encodeURI(e[t]):e[t]}function getRoute(e,t){var n=getURLPart(e,t).slice(modes[t].length);return"pathname"!==t||/^\//.test(n)||(n="/"+n),n}function makeRouter(e){function t(c,h,f,d){if(0===arguments.length)return u;if(3===arguments.length&&isString(h)){l=function(e){if(u=e,!n(c,f,e)){if(s)throw new Error("Ensure the default route matches one of the routes defined in route");s=!0,t(h,!0),s=!1}};var p="hash"===t.mode?"onhashchange":"onpopstate";return window[p]=function(){var e=getRoute(location,t.mode);"pathname"===t.mode&&(e+=getURLPart(location,"search")),u!==e&&l(e)},e.preRedraw=r,void window[p]()}if(c.addEventListener||c.attachEvent){var m="pathname"!==t.mode?getRoute(location,"pathname"):"";return c.href=m+modes[t.mode]+d.attrs.href,void(c.addEventListener?(c.removeEventListener("click",i),c.addEventListener("click",i)):(c.detachEvent("onclick",i),c.attachEvent("onclick",i)))}if(isString(c)){var v=u;u=encodeURI(c);var g,R=h||{},w=u.indexOf("?");g=w>-1?a(u.slice(w+1)):{};for(var E in R)hasOwn.call(R,E)&&(g[E]=R[E]);var y,U=o(g);y=w>-1?u.slice(0,w):u,U&&(u=y+(-1===y.indexOf("?")?"?":"&")+U);var O=(3===arguments.length?f:h)===!0||v===u;if(window.history.pushState){var b=O?"replaceState":"pushState";e.preRedraw=r,e.postRedraw=function(){window.history[b](null,document.title,modes[t.mode]+u)},l(u)}else location[t.mode]=u,l(u)}}function n(t,n,r){c={};var o=r.indexOf("?"),i=0;-1!==o&&(c=a(r.substr(o+1,r.length)),r=r.substr(0,o));var u=Object.keys(n).map(encodeURI),l=u.indexOf(r);if(-1!==l)return e(t,n[u[l]]),!0;for(var s in n)if(hasOwn.call(n,s)){if(s=u[i++],s===r)return e(t,n[s]),!0;var h=new RegExp("^"+s.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(h.test(r))return r.replace(h,function(){var r=s.match(/:[^\/]+/g)||[],o=[].slice.call(arguments,1,-2);forEach(r,function(e,t){c[e.replace(/:|\./g,"")]=decodeURIComponent(o[t])}),e(t,n[s])}),!0}}function r(){"hash"!==t.mode&&location.hash?location.hash=location.hash:window.scrollTo(0,0)}function o(e,t){var n={},r=[];for(var a in e)if(hasOwn.call(e,a)){var i=t?t+"["+a+"]":a,c=e[a];if(null===c)r.push(encodeURIComponent(i));else if(isObject(c))r.push(o(c,i));else if(isArray(c)){var u=[];n[i]=n[i]||{},forEach(c,function(e){n[i][e]||(n[i][e]=!0,u.push(encodeURIComponent(i)+"="+encodeURIComponent(e)))}),r.push(u.join("&"))}else void 0!==c&&r.push(encodeURIComponent(i)+"="+encodeURIComponent(c))}return r.join("&")}function a(e){if(""===e||null==e)return{};"?"===e.charAt(0)&&(e=e.slice(1));var t=e.split("&"),n={};return forEach(t,function(e){var t=e.split("="),r=decodeURIComponent(t[0]),o=2===t.length?decodeURIComponent(t[1]):null;null!=n[r]?(isArray(n[r])||(n[r]=[n[r]]),n[r].push(o)):n[r]=o}),n}function i(e){if(e=e||event,!(e.ctrlKey||e.metaKey||e.shiftKey||2===e.which)){e.preventDefault?e.preventDefault():e.returnValue=!1;var n,r=e.currentTarget||e.srcElement;for(n="pathname"===t.mode&&r.search?a(getURLPart(r,"search")):{};r&&!/a/i.test(r.nodeName);)r=r.parentNode;t(getRoute(r,t.mode),n)}}var c,u,l=noop,s=!1;return t.param=function(e){if(!c)throw new Error("You must call route(element, defaultRoute, routes) before calling route.param()");return e?c[e]:c},t.mode="search",t.buildQueryString=o,t.parseQueryString=a,t}var type={}.toString,isArray=Array.isArray||function(e){return"[object Array]"===type.call(e)},hasOwn={}.hasOwnProperty,modes={pathname:"",hash:"#",search:"?"},aElement=document.createElement("a");aElement.href="/รถ?รถ#รถ",module.exports=makeRouter;